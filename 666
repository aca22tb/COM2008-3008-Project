// 弹出对话框以输入银行信息
private void showBankDetailsDialog() {
    JPanel panel = new JPanel(new GridLayout(6, 2));

    JTextField cardHolderNameField = new JTextField();
    JTextField cardNumberField = new JTextField();
    JTextField cvvField = new JTextField();
    JTextField expiryDateField = new JTextField();

    panel.add(new JLabel("Cardholder Name:"));
    panel.add(cardHolderNameField);
    panel.add(new JLabel("Card Number:"));
    panel.add(cardNumberField);
    panel.add(new JLabel("CVV:"));
    panel.add(cvvField);
    panel.add(new JLabel("Expiry Date:"));
    panel.add(expiryDateField);

    int result = JOptionPane.showConfirmDialog(this, panel, "Enter Bank Details", JOptionPane.OK_CANCEL_OPTION);

    if (result == JOptionPane.OK_OPTION) {
        // Add code to process the bank details and complete the order
        saveBankDetailsToDatabase(cardHolderNameField.getText(), cardNumberField.getText(),
                cvvField.getText(), expiryDateField.getText());
    }
}

// 保存银行信息到数据库
private void saveBankDetailsToDatabase(String cardHolderName, String cardNumber, String cvv, String expiryDate) {
    // 获取当前登录用户的信息
    String userEmail = /* 获取当前登录用户的email */;
    String userRole = /* 获取当前登录用户的role */;

    // 保存银行信息到数据库，包括用户的email和role
    try (Connection connection = DatabaseConnection.getConnection()) {
        String query = "INSERT INTO bank_details (email, role, card_holder_name, card_number, cvv, expiry_date) VALUES (?, ?, ?, ?, ?, ?)";
        try (PreparedStatement preparedStatement = connection.prepareStatement(query)) {
            preparedStatement.setString(1, userEmail);
            preparedStatement.setString(2, userRole);
            preparedStatement.setString(3, cardHolderName);
            preparedStatement.setString(4, cardNumber);
            preparedStatement.setString(5, cvv);
            preparedStatement.setString(6, expiryDate);
            int rowsAffected = preparedStatement.executeUpdate();

            if (rowsAffected > 0) {
                System.out.println("Bank details saved successfully. Rows affected: " + rowsAffected);
            } else {
                System.out.println("Failed to save bank details. No rows affected.");
            }
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    JOptionPane.showMessageDialog(this, "Order confirmed! Bank details:\n" +
            "Cardholder Name: " + cardHolderName + "\n" +
            "Card Number: " + cardNumber + "\n" +
            "CVV: " + cvv + "\n" +
            "Expiry Date: " + expiryDate);
}
