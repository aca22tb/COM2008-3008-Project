CREATE TABLE bank_details (
    id INT PRIMARY KEY AUTO_INCREMENT,
    email VARCHAR(255) NOT NULL,
    role VARCHAR(255) NOT NULL,
    card_holder_name VARCHAR(255) NOT NULL,
    card_number VARCHAR(255) NOT NULL,
    cvv VARCHAR(255) NOT NULL,
    expiry_date VARCHAR(255) NOT NULL
);

private void saveBankDetailsToDatabase(String cardHolderName, String cardNumber, String cvv, String expiryDate) {
    // 获取当前登录用户的信息
    String userEmail = emailField.getText(); // 这里假设你有一个用于存储用户 email 的字段
    String userRole = /* 获取当前登录用户的 role，可能是从数据库中查询得到 */;

    // 保存银行信息到数据库，包括用户的 email 和 role
    try (Connection connection = DatabaseConnection.getConnection()) {
        String query = "INSERT INTO bank_details (email, role, card_holder_name, card_number, cvv, expiry_date) VALUES (?, ?, ?, ?, ?, ?)";
        try (PreparedStatement preparedStatement = connection.prepareStatement(query)) {
            preparedStatement.setString(1, userEmail);
            preparedStatement.setString(2, userRole);
            preparedStatement.setString(3, cardHolderName);
            preparedStatement.setString(4, cardNumber);
            preparedStatement.setString(5, cvv);
            preparedStatement.setString(6, expiryDate);
            int rowsAffected = preparedStatement.executeUpdate();

            if (rowsAffected > 0) {
                System.out.println("Bank details saved successfully. Rows affected: " + rowsAffected);
            } else {
                System.out.println("Failed to save bank details. No rows affected.");
            }
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }

    JOptionPane.showMessageDialog(this, "Order confirmed! Bank details:\n" +
            "Cardholder Name: " + cardHolderName + "\n" +
            "Card Number: " + cardNumber + "\n" +
            "CVV: " + cvv + "\n" +
            "Expiry Date: " + expiryDate);
}
